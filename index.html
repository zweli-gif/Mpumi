<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mpumi — Growth Farm Master</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{--brown:#5D4037;--pink:#D4A5A5;--cream:#FAF8F5;--white:#FFF;--success:#4A7C59;--warning:#C9A227;--danger:#8B4049;--info:#5C7A99}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Inter',sans-serif;background:var(--cream);color:var(--brown);padding-bottom:60px;line-height:1.2}
    .header{background:var(--brown);padding:8px 16px;position:sticky;top:0;z-index:100;border-bottom:2px solid var(--pink);display:flex;justify-content:space-between;align-items:center}
    .logo{font-family:'Playfair Display',serif;font-weight:600;color:var(--cream);font-size:13px}
    .screen{display:none;padding:8px}.screen.active{display:block}
    .card{background:var(--white);border-radius:8px;padding:10px;margin-bottom:8px;box-shadow:0 1px 3px rgba(0,0,0,0.05)}
    .card-title{font-family:'Playfair Display',serif;font-size:12px;font-weight:700;margin-bottom:6px;border-bottom:1px solid #f0f0f0;padding-bottom:4px}
    /* Compact Metrics */
    .fin-bar{height:10px;background:#eee;border-radius:5px;margin:4px 0;overflow:hidden}.fin-fill{height:100%;background:var(--success)}
    /* Delivery Styles */
    .delivery-item{border-bottom:1px solid #f0f0f0;padding:6px 0;margin-bottom:6px}
    .delivery-item:last-child{border-bottom:none}
    table{width:100%;font-size:10px;margin:4px 0}
    th{text-align:left;color:var(--brown-light);font-weight:400}
    .dep-badge{font-size:9px;background:rgba(201,162,39,0.1);color:var(--warning);padding:2px 6px;border-radius:4px;display:inline-block;margin-top:4px}
    /* Form Styles */
    input, select, textarea{width:100%;padding:8px;margin-top:4px;border:1px solid #ddd;border-radius:6px;font-size:11px}
    .btn-commit{background:var(--brown);color:white;padding:10px;border:none;border-radius:6px;width:100%;font-weight:700;margin-top:8px;cursor:pointer}
    .nav{position:fixed;bottom:0;width:100%;background:var(--white);display:flex;border-top:1px solid #eee;z-index:100}
    .nav-item{flex:1;padding:10px;text-align:center;font-size:9px;font-weight:700;color:var(--brown-light);cursor:pointer}
    .nav-item.active{color:var(--brown);border-top:3px solid var(--pink)}
  </style>
</head>
<body>

<header class="header"><div class="logo">MPUMI • GROWTH FARM</div><div style="font-size:9px;color:var(--pink);font-weight:700">V6.1 LIVE</div></header>

<div class="screen active" id="scr-dash">
  <div class="card">
    <div class="card-title">Finance Cascade (Target R24M)</div>
    <div style="font-size:10px;display:flex;justify-content:space-between"><span>Revenue: R1.8M / R2M</span><span style="font-weight:700">90%</span></div>
    <div class="fin-bar"><div class="fin-fill" style="width:90%"></div></div>
    <div style="font-size:9px;color:var(--brown-light);margin-top:4px">Calculated monthly pacing</div>
  </div>
  
  <div class="card">
    <div class="card-title">Top Dependencies</div>
    <div id="dash-dep-list">
      <div class="dep-badge">NALEDI: Needs vendor payment for Briansfomo</div>
    </div>
  </div>
</div>

<div class="screen" id="scr-delivery">
  <div class="card">
    <div class="card-title">Ongoing Project Delivery</div>
    <div id="project-container">
      <div class="delivery-item">
        <strong style="color:var(--pink);font-size:11px">Gates Foundation: R&D Strategy</strong>
        <table><tr><th>Resource</th><th>Hours</th><th>Margin</th></tr><tr><td>Lindiwe</td><td>142/160</td><td style="color:var(--success)">18%</td></tr></table>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-title">New Entry</div>
    <input type="text" id="cName" placeholder="Client Name">
    <input type="text" id="rName" placeholder="Resource Name">
    <div style="display:flex;gap:4px">
        <input type="number" id="cRate" placeholder="Client Rate">
        <input type="number" id="pRate" placeholder="Our Cost">
    </div>
    <select id="depOn"><option value="">Dependency (Who?)</option><option value="Zweli">Zweli</option><option value="Thabo">Thabo</option><option value="Lindiwe">Lindiwe</option><option value="Naledi">Naledi</option></select>
    <textarea id="dNote" placeholder="2-line accountability description..." rows="2"></textarea>
    <button class="btn-commit" onclick="commitProject()">Commit to Pipeline</button>
  </div>
</div>

<div class="screen" id="scr-analysis">
  <div class="card">
    <div class="card-title">Strategic Insights</div>
    <div style="font-size:11px">
        <strong>Trend: CEO Blocker</strong>
        <p style="color:var(--brown-light);margin-bottom:8px">70% of dependencies wait on Zweli.</p>
        <strong>Trend: Billable Leakage</strong>
        <p style="color:var(--brown-light)">Actuals exceeding planned hours by 12%.</p>
    </div>
  </div>
</div>

<nav class="nav">
  <div class="nav-item active" onclick="nav('dash')">DASH</div>
  <div class="nav-item" onclick="nav('delivery')">DELIVERY</div>
  <div class="nav-item" onclick="nav('analysis')">ANALYSIS</div>
</nav>

<script>
function nav(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('scr-'+id).classList.add('active');
  event.currentTarget.classList.add('active');
}

function commitProject(){
  const client = document.getElementById('cName').value;
  const res = document.getElementById('rName').value;
  const cRate = document.getElementById('cRate').value;
  const pRate = document.getElementById('pRate').value;
  const dep = document.getElementById('depOn').value;
  const note = document.getElementById('dNote').value;
  
  if(!client || !res) return alert("Please fill in Client and Resource");

  const margin = Math.round(((cRate - pRate) / cRate) * 100);
  const color = margin < 15 ? 'var(--danger)' : 'var(--success)';

  const html = `
    <div class="delivery-item">
      <strong style="color:var(--pink);font-size:11px">${client}</strong>
      <table><tr><th>Resource</th><th>Margin</th></tr><tr><td>${res}</td><td style="color:${color}">${margin}%</td></tr></table>
      ${dep ? `<div class="dep-badge">${dep.toUpperCase()}: ${note}</div>` : ''}
    </div>`;
  
  document.getElementById('project-container').innerHTML += html;
  
  // Clear form
  document.getElementById('cName').value = '';
  document.getElementById('rName').value = '';
  alert("Data Committed! Switching to Delivery view.");
  nav('delivery');
}
</script>
</body>
</html>
